#!/bin/sh

# Get the directory containing this script (Contents/MacOS)
SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"

# Navigate to InferNode root (MacOSX/Infernode.app/Contents/MacOS -> root)
INFERNODE_ROOT="$(cd "$SCRIPT_DIR/../../../.." && pwd)"

# Determine architecture
case $(uname -m) in
    arm64|aarch64)
        OBJTYPE=arm64
        ;;
    x86_64)
        OBJTYPE=amd64
        ;;
    *)
        OBJTYPE=386
        ;;
esac

EMU="$INFERNODE_ROOT/emu/MacOSX/o.emu"

cd "$INFERNODE_ROOT/emu/MacOSX"
exec "$EMU" -c1 -pheap=128m -pmain=128m -pimage=128m -r../.. sh -l -c 'xenith -t dark' 
